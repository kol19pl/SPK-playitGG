#!/bin/sh
# Copyright (C) 2000-2020 Synology Inc. All rights reserved.

#!/bin/sh

DAEMON="/var/packages/playit/target/bin/playit-linux"
PIDFILE="/var/packages/playit/target/var/playit.pid"

case $1 in
	start)
		echo "Starting playit-linux..."
		$DAEMON &
		echo $! > $PIDFILE
		echo "The package has been started" > $SYNOPKG_TEMP_LOGFILE
		exit 0
	;;
	stop)
		if [ -f "$PIDFILE" ]; then
			kill "$(cat $PIDFILE)"
			rm -f $PIDFILE
			echo "The package has been stopped" > $SYNOPKG_TEMP_LOGFILE
			exit 0
		else
			echo "Process not running"
			exit 1
		fi
	;;
	status)
	if pgrep -f "playit-linux" > /dev/null; then
		exit 0  # Proces działa
	else
		exit 1  # Proces nie działa
	fi
;;
	killall)
		killall playit-linux-amd64
		exit 0
	;;
	log)
		exit 0
	;;
	*)
		echo "Usage: $0 {start|stop|status|killall|log}"
		exit 1
	;;
esac

